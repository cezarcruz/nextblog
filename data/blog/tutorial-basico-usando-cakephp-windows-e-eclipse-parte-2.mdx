---
title: Tutorial b√°sico usando CakePHP, Windows e Eclipse ‚Äì Parte 2
draft: false
date: 2013-06-20T13:11:04+00:00
tags:
  - PHP
  - CakePHP
---

Continuando com a segunda parte do tutorial b√°sico usando CakePHP, Windows e Eclipse.

A primeira parte voc√™ encontra [aqui][1], paramos na tela em que √© exibido uma mensagem de erro de conex√£o com o bando de dados no CakePHP, vamos l√°.

Primeiro, precisamos criar uma base de dados, como estamos utilizando o Wamp, √© s√≥ utilizar o phpMyAdmin, para o tutorial, vamos criar um base de dados chamada **cake.**

Depois de criado o banco de dados, vamos configurar ele no projeto:

Abra a pasta app->Config,¬†nessa pasta, encontramos os arquivos relacionados ao configura√ß√£o do CakePHP, o arquivo que conecta com a base de dados √© o database.php.default, o primeiro passo √© renomear ele para database.php:

> No Eclipse, o bot√£o F2, √© um atalho para renomear arquivos e pastas.

Ap√≥s renomear o arquivo, vamos configurar a conex√£o com a base de dados, procure no arquivos por class DATABASE_CONFIG, ela deve esar assim:

```php
class DATABASE_CONFIG {

    public $default = array(
        'datasource' =>; 'Database/Mysql',
        'persistent' =>; false,
        'host' =>; 'localhost',
        'login' =>; 'user',
        'password' =>; 'password',
        'database' =>; 'database_name',
        'prefix' =>; '',
        //'encoding' => 'utf8',
    );

    public $test = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'user',
        'password' => 'password',
        'database' => 'test_database_name',
        'prefix' => '',
        //'encoding' => 'utf8',
    );
}
```

Devemos alterar apenas o login, password e o database:

```php
'login' => 'root',¬†'password' => "",
'database' => 'cake'
```

> Lembrando que os dados de conex√£o pode variar de instala√ß√£o para instala√ß√£o, por√©m, o padr√£o do Wamp √© o que est√° acima

Por fim, seu c√≥digo deve ficar assim:

```php
class DATABASE_CONFIG {

    public $default = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'root',
        'password' => '',
        'database' => 'cake',
        'prefix' => '',
        //'encoding' => 'utf8',
    );

    public $test = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'user',
        'password' => 'password',
        'database' => 'test_database_name',
        'prefix' => '',
        //'encoding' => 'utf8',
    );
}
```

E ao acessar a pagina via navegador, deveremos ter o seguinte resultado:

![P√°gina inicial](http://res.cloudinary.com/cezarcruz-com-br/image/upload/v1454457599/cake_php_home_final_sem_erros_vnpu2o.png 'Text to show on mouseover')

O Ultimo Warning restante √© sugerindo a instala√ß√£o do DebugKit, no momento n√£o teremos utilidade para ele no nosso tutorial, ent√£o fica pra pr√≥xima üòâ

Agora, vamos a parte te√≥rica:

![Eclipse](http://res.cloudinary.com/cezarcruz-com-br/image/upload/v1454457598/estrutura_de_diretorios_cake_hvocmx.png 'Eclipse')

Pra esse tutorial a parte mais importante do CakePHP √© a que est√° dentro da pasta app, ent√£o n√£o vou entrar em detalhe sobre as outras.

As pastas que utilizamos com mais frequ√™ncia s√£o Controller, View e Model (M V C):

A pasta Controller √© onde colocamos nossos controladores, ou seja, onde trataremos as entradas e sa√≠das da Aplica√ß√£o.

A pasta Model √© onde colocamos a parte que traz dados, n√£o s√≥ de uma base de dados.

A pasta View √© onde colocamos os arquivos relacionados a layouts (CSS, HTML) e exibi√ß√£o de conte√∫do no navegador.

Resumindo:

Quando um usu√°rio requisita uma p√°gina, ex: lista de livros, o controller recebe essa requisi√ß√£o, faz uma chamada no model para carregar os livros e envia para a view, que exibe para usu√°rio.

Vamos criar nossa primeira p√°gina, m√£os a obra.

Como quem recebe as requisi√ß√µes √© o controller, ent√£o, vamos come√ßar pelo controller:

Na pasta controller, criaremos o arquivo HomeController.php.

> Por conven√ß√£o, o controller seguido da palavra Controller iniciada com letra mai√∫scula. ex: TimesController.php

> Quando criamos um controller HomeController.php, queremos dizer ao CakePHP que envie as solicita√ß√µes http://localhost/cake/home para ele

Ap√≥s criarmos o controller vamos edit√°-lo da seguinte forma:

```php
<?php
class HomeController extends AppController{
    public function index(){

    }
}
?>
```

Aqui uma men√ß√£o a programa√ß√£o orientada a objetos. =D

Sempre devemos come√ßar nosso controller, declarando class seguido do nome do controller extends AppController

> Repare que na pasta Controller temos o arquivo AppController.php, devemos (mas n√£o somos obrigados) estender nossa classe dela pois podemos usar ela para carregar algo padr√£o para todos os outros controllers, um plugin por exemplo, ou desabilitar o uso da base de dados.

Na linha seguinte, colocamos public function index() que seria o mesmo que colocar a p√°gina index.php, essa ser√° a fun√ß√£o a ser executada caso n√£o tenha nenhum par√¢metro com a url home.

Sempre que criamos uma function no controller, devemos criar um arquivo .ctp (Cake Template) para que ela seja carregada automaticamente.

Como criamos a **function index** dentro do **controller Home**, devemos criar, dentro da pasta View, uma pasta chamada **Home** e um arquivo chamado **index.ctp**

> Se dentro do controller Home criarmos uma function cadastrar, devemos, dentro de View/Home, criar um arquivos cadastrar.ctp, ele ser√° exibido quando a url for http://localhost/cake/home/cadastrar.

Esses arquivos de template √© que ir√° ser exibido no navegador, os arquivos .ctp ser√£o tratados como arquivos php, ou seja, voc√™ pode colocar HTML, Css, JS ou Php nele.

Para finalizarmos essa parte do tutorial, faremos o seguinte, coloque o c√≥digo abaixo no no arquivo index.ctp

```php
<?php echo "HelloCake" ?>
```

Feito isso acesse o link http://localhost/cake/home, o resultado ser√° o seguinte:

![Ol√° Cake](http://res.cloudinary.com/cezarcruz-com-br/image/upload/v1454457597/hello_cake_tw5o6d.png 'Ol√° Cake')

Est√° ai nossa primeira p√°gina utilizando o CakePHP, repare que ela j√° est√° estilizada, isso acontece porque n√£o definimos nenhum layout, ent√£o ele carrega o layout padr√£o definido pelo CakePHP, em outro tutorial veremos com isso funciona.

At√© a pr√≥xima.
